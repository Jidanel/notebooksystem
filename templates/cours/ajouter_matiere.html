{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <h1>Ajouter une Mati√®re</h1>
    <form method="POST">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="id_nom">Nom :</label>
            {{ form.nom }}
        </div>
        
        <div class="form-group">
            <label for="id_coefficient">Coefficient :</label>
            {{ form.coefficient }}
        </div>
        
        <div class="form-group">
            <label for="id_departement">Departement :</label>
            {{ form.departement }}
        </div>
        
        <div class="form-group">
            <label for="id_classe">Classe :</label>
            {{ form.classe }}
        </div>
        
        <div class="form-group">
            <label for="id_enseignant">Enseignant :</label>
            {{ form.enseignant }}
        </div>
        
        <div class="form-group">
            <label for="id_groupe">Groupe :</label>
            {{ form.groupe }}
        </div>
        
        <button type="submit" class="btn btn-primary">Ajouter</button>
    </form>
</div>


<script>
    document.addEventListener('DOMContentLoaded', function () {
        var departementSelect = document.getElementById('id_departement');
        departementSelect.addEventListener('change', function () {
            var form = this.closest('form');
            var action = form.action;
            var url = new URL(action);
            url.pathname = "{% url 'filtrer_enseignants_par_departement' %}";
            url.searchParams.set('departement', this.value);
            window.location.href = url.toString();
        });
    });
</script>
{% endblock %}
